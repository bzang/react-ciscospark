import React from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';
import AddFileButton from '@ciscospark/react-component-add-file-button';
import FileStagingArea from '@ciscospark/react-component-file-staging-area';

import enhancer from './enhancer';
import styles from './styles.css';

const propTypes = {
  // From ownProps
  onSubmit: PropTypes.func.isRequired,
  // From enhancer
  files: PropTypes.array.isRequired,
  handleFileRemove: PropTypes.func.isRequired,
  handleFileChange: PropTypes.func.isRequired
};

function FileUploader(props) {
  const {
    onSubmit,
    files,
    handleFileRemove,
    handleFileChange
  } = props;

  let stagingArea;
  if (files && files.count()) {
    stagingArea = (
      <FileStagingArea
        files={files}
        onFileRemove={handleFileRemove}
        onSubmit={onSubmit}
      />
    );
  }

  return (
    <div className={classNames('ciscospark-file-uploader-container', styles.container)}>
      {stagingArea}
      <div className={classNames('ciscospark-button-container', styles.buttonContainer)}>
        <AddFileButton onChange={handleFileChange} />
      </div>
    </div>
  );
}

FileUploader.propTypes = propTypes;

export default enhancer(FileUploader);
