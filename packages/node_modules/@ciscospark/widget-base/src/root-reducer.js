import {combineReducers} from 'redux';
import {REMOVE_WIDGET} from './actions';
import sparkReducer from '@ciscospark/react-redux-spark';
import usersReducer from '@ciscospark/redux-module-users';

export default function createRootReducer(reducers = {}) {
  reducers.spark = sparkReducer;
  reducers.users = usersReducer;
  const widgetReducer = combineReducers(reducers);
  return (state, action) => {
    if (action.type === REMOVE_WIDGET) {
      state = undefined;
    }
    if (widgetReducer) {
      return widgetReducer(state, action);
    }
    return state;
  };
}
