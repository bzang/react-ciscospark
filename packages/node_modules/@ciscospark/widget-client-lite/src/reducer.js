import {fromJS} from 'immutable';
import {reducers as space} from '@ciscospark/widget-space';
import {reducers as recents} from '@ciscospark/widget-recents';

import {
  STORE_SPACE,
  SET_ACTIVE_SPACE
} from './actions';

export const initialState = fromJS({
  activeSpaceId: null,
  spaces: {}
});

// eslint-disable-next-line complexity
export function reducer(state = initialState, action) {
  switch (action.type) {
    case STORE_SPACE:
      return state.setIn(['spaces', action.payload.id], action.payload.space);

    case SET_ACTIVE_SPACE:
      return state.set('activeSpaceId', action.payload.id);

    default:
      return state;
  }
}

const reducers = {
  ...space,
  ...recents,
  client: reducer
};

export default reducers;
