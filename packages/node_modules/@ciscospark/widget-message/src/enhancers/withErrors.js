import React from 'react';
import PropTypes from 'prop-types';
import {intlShape} from 'react-intl';

import {
  branch,
  renderComponent
} from 'recompose';

import ErrorDisplay from '@ciscospark/react-component-error-display';

import messages from '../messages';

function WithError({intl, space}) {
  const {formatMessage} = intl;
  return (
    <ErrorDisplay
      secondaryTitle={space.error.description}
      title={formatMessage(messages.errorConversation)}
    />
  );
}

WithError.propTypes = {
  space: PropTypes.object,
  intl: intlShape.isRequired
};

WithError.defaultProps = {
  space: null
};

const hasError = ({space}) => space && space.error;

export default branch(
  hasError,
  renderComponent(WithError)
);
