import {compose, setDisplayName} from 'recompose';
import PropTypes from 'prop-types';
import {connect} from 'react-redux';

import ActivityListComponent from '@ciscospark/react-component-activity-list';

import {getActivityList} from './selectors';
import enhancers from './enhancers';

function mapStateToProps(state, props) {
  return Object.assign({}, props, {
    activities: getActivityList(state, props)
  });
}

const ActivityList = compose(
  setDisplayName('ActivityListContainer'),
  connect(mapStateToProps),
  ...enhancers
)(ActivityListComponent);

ActivityList.propTypes = {
  // Pass props
  spaceId: PropTypes.string,
  activityFormatter: PropTypes.func,
  newMessagesMessage: PropTypes.string.isRequired,
  // From selector
  activities: PropTypes.array,
  // From withActivityHandlers
  onActivityDelete: PropTypes.func.isRequired,
  onActivityRetry: PropTypes.func.isRequired,
  // From withFlags
  onActivityFlag: PropTypes.func.isRequired
};

export default ActivityList;
